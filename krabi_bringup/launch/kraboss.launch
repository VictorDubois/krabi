<launch>
    <arg name="isBlue" default="false"/>
    <arg name="isSimulation" default="true"/>

    <rosparam file="$(find krabi_bringup)/config/is_blue.yaml" if="$(arg isBlue)" />
    <rosparam file="$(find krabi_bringup)/config/is_yellow.yaml" unless="$(arg isBlue)" />


    <group if="$(arg isSimulation)">
    	<include file="$(find aruco_to_pose)/launch/weathercock_detector_only.launch" ns="/krabby">
    	</include>
        <include file="$(find krabi_bringup)/launch/krabossSimu.launch">
            <arg name="isBlue" value="$(arg isBlue)"/>
        </include>
        <param name="/strategy/lidar/min_intensity" value="0" />
        <param name="/use_sim_time" value="true"/>
    </group>
    <group unless="$(arg isSimulation)">
    	<include file="$(find aruco_to_pose)/launch/weathercock_detector_webcam.launch" ns="/krabby">
    	</include>
        <include file="$(find krabi_bringup)/launch/krabossHardware.launch" ns="/krabby"/>
	<!--<node pkg="tf" type="static_transform_publisher" name="odom_map" args="$(arg init_pose/x) $(arg init_pose/y) 0 $arg(init_pose/theta) 0 0 /map /krabby/odom 50"/>-->
        <group if="$(arg isBlue)">
            <node pkg="tf" type="static_transform_publisher" name="odom_map" args="-1.38 0.2 0 0 0 0 /map /krabby/odom 50"/>
        </group>
        <group unless="$(arg isBlue)">
            <node pkg="tf" type="static_transform_publisher" name="odom_map" args="1.38 0.2 0 3.1451 0 0 /map /krabby/odom 50"/>
        </group>

    </group>

    <include file="$(find krabi_bringup)/launch/krabossMain.launch" ns="/krabby">
        <arg name="isBlue" value="$(arg isBlue)"/>
    </include>
</launch>
